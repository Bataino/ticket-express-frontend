import{b as c,o as r,c as m,d as i,a as e,f as p,v as u,u as a,F as w,r as _,w as g,s as h}from"./index-80291f2e.js";import{s as v}from"./calendar.esm-db9ad45c.js";import"./index.esm-367fbb4e.js";import"./fileuploadstyle.esm-5ac1996c.js";import{m as f}from"./index-a748343f.js";const V={class:""},y=e("h4",{class:"mb-3 mt-2 fw-bold small"}," Create Page ",-1),S={class:"row overflow-hidden",style:{overflow:"hidden"}},$={class:"col-12 col-md-6"},z=e("label",{class:"fw-bold small mb-1"}," Event Name ",-1),D={class:"col-12 col-md-6"},E=e("label",{class:"fw-bold small mb-1"}," Description ",-1),F={class:"col-12 col-md-6"},U=e("label",{class:"fw-bold small mb-1"}," Start date ",-1),T={class:"col-12 col-md-6"},C=e("label",{class:"fw-bold small mb-1"}," Start Time ",-1),L={class:"col-12 col-md-6"},B={class:"mb-3"},N=e("label",{class:"fw-bold small mb-1"}," Estimated Number of attendees ",-1),O={class:"col-12 col-md-6"},k={class:"mb-3"},j=e("label",{class:"fw-bold small mb-1"}," Select Timezone ",-1),A={class:"col-12 col-md-12"},M={class:"mb-3 d-flex flex-wrap"},P=e("div",{class:"fw-bold small mb-1 w-100"},"Add files",-1),R=e("br",null,null,-1),q={class:"fw-bold small mb-1",for:"files"},H={class:"py-4 px-3 bg-primary rounded-7"},I={class:"p-1 me-2 position-relative rounded-7 overflow-hidden w-fit",style:{"max-width":"160px",height:"200px"}},Z=["src"],G=e("button",{class:"btn btn-primary mt-3 mb-4 p-2 w-100 w-lg-fit",type:"submit"}," Create Event ",-1),J={name:"HomeView",components:{},data(){const o=f.tz.names();return{event:{title:"",description:""},venue:{},files:[],attendees:["Less than 250","251 to 500","501 to 1,000","1,001 to 5,0001","5,0001 to 10,000","10,0000+"],zones:o}},methods:{getFormData(){const o=new FormData;return this.event.start=new Date(this.event.start).toLocaleString(),this.event.end=new Date(this.event.end).toLocaleString(),this.event.time_zone=f.tz(this.event.time_zone).zoneName(),o.append("title",this.event.title),o.append("description",this.event.description),o.append("start",this.event.start),o.append("end",this.event.end),o.append("attendees",this.event.attendees),o.append("time_zone",this.event.time_zone),this.files.forEach(t=>o.append("files[]",t)),o},isValidated(){const{event:o}=this,{description:t,title:s,start:d,time_zone:n,attendees:l}=o;return s&&t&&d&&n&&l},async createEvent(){if(console.log(Object.keys(this.event).length),!this.isValidated()||!this.files[0]){this.$toast.error("All fields are required");return}const o=this.getFormData();this.$widget.openLoading();const t=await this.$store.dispatch("createEventService",o);if(t.success){this.$toast.success("Event has been successfully created"),location.href="/event/"+t.data.id;return}this.$widget.dismiss(),this.$toast.error("Could not create event")},getUrl(o){return URL.createObjectURL(o)},updateFiles(){console.log(this.$refs.files.files);const o=Array.from(this.$refs.files.files).find(s=>!s.type.includes("image"));if(Array.from(this.$refs.files.files).find(s=>s.size>2097152)){this.$toast.error("File size must not exceed 2MB");return}if(o){this.$toast.error("File type must be image");return}this.files.push(...this.$refs.files.files)}},watch:{venue(o){this.event.venue_id=o.id}},created(){this.$store.dispatch("getVenueService")}},ee=Object.assign(J,{setup(o){return(t,s)=>{const d=c("te-header"),n=c("icon");return r(),m("div",V,[i(d),e("form",{class:"p-3",onSubmit:s[7]||(s[7]=g((...l)=>t.createEvent&&t.createEvent(...l),["prevent"])),_style:"max-width:99vw;"},[y,e("div",S,[e("div",$,[e("div",null,[z,p(e("input",{placeholder:"Enter name",autocomplete:"","onUpdate:modelValue":s[0]||(s[0]=l=>t.event.title=l),class:"p-2 border rounded-7 w-100 mb-3"},null,512),[[u,t.event.title]])])]),e("div",D,[e("div",null,[E,p(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=l=>t.event.description=l),autocomplete:"",placeholder:"Enter Description",class:"p-3 border rounded-7 w-100 mb-3",style:{"min-height":"100px"}},null,512),[[u,t.event.description]])])]),e("div",F,[e("div",null,[U,i(a(v),{modelValue:t.event.start,"onUpdate:modelValue":s[2]||(s[2]=l=>t.event.start=l),placeholder:"Select Date","min-date":new Date,hideOnDateTimeSelect:"",class:"mb-3 rounded-7 w-100"},null,8,["modelValue","min-date"])])]),e("div",T,[e("div",null,[C,i(a(v),{modelValue:t.event.start,"onUpdate:modelValue":s[3]||(s[3]=l=>t.event.start=l),placeholder:"Select Time","min-date":new Date,timeOnly:"",stepMinute:"15",hideOnDateTimeSelect:"",class:"mb-3 rounded-7 w-100"},null,8,["modelValue","min-date"])])]),e("div",L,[e("div",B,[N,i(a(h),{modelValue:t.event.attendees,"onUpdate:modelValue":s[4]||(s[4]=l=>t.event.attendees=l),options:t.attendees,placeholder:"Select number",class:"w-100 mb-1"},null,8,["modelValue","options"])])]),e("div",O,[e("div",k,[j,i(a(h),{modelValue:t.event.time_zone,"onUpdate:modelValue":s[5]||(s[5]=l=>t.event.time_zone=l),options:["EST","PST"],placeholder:"Select a TimeZone",class:"w-100 mb-1"},null,8,["modelValue"])])]),e("div",A,[e("div",M,[P,R,e("label",q,[e("div",H,[i(n,{icon:"mingcute:add-fill",class:"fs-1 text-white"})])]),(r(!0),m(w,null,_(t.files,(l,b)=>(r(),m("div",I,[e("img",{class:"w-100 rounded-7 object-fit-cover",src:t.getUrl(l)},null,8,Z),i(n,{icon:"icons8:cancel",class:"fs-2 pe-point text-danger position-absolute top-0 start-0",onClick:K=>t.files.splice(b,1)},null,8,["onClick"])]))),256)),e("input",{type:"file",multiple:"",ref:"files",accept:"image/*",id:"files",hidden:"",onChange:s[6]||(s[6]=(...l)=>t.updateFiles&&t.updateFiles(...l))},null,544)])])]),G],32)])}}});export{ee as default};
