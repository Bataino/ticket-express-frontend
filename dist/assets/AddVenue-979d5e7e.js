import{_ as S,b as i,o as c,c as g,a as t,d,x as f,F as v,r as y,p as _,q as T,m as N,n as k,a3 as M,f as b,v as w,u as q,g as D,w as A}from"./index-d4651997.js";import{s as B}from"./checkbox.esm-9acbf13b.js";import"./index.esm-335f96cf.js";import"./fileuploadstyle.esm-2cba6426.js";const H={name:"VenueBuiler",props:["class","style"],components:{},data(){return{stageConfig:{width:800,height:300},shapes:[],seats:[],seatGroups:[],selectedShapeName:""}},methods:{addCircle(){const s="shape"+this.shapes.length;this.shapes.push({type:"v-circle",attrs:{x:200+Math.random()*(1-100)+1,y:100+Math.random()*(1-100)+1,radius:50,fill:"blue",draggable:!0,name:s}})},addSquare(){const s="shape"+this.shapes.length;console.log(s),this.shapes.push({type:"v-rect",attrs:{x:200+Math.random()*(1-100)+1,y:100+Math.random()*(1-100)+1,width:80,height:80,fill:"green",draggable:!0,name:s}})},handleTransformEnd(s){const e=this.shapes.find(n=>n.attrs.name===this.selectedShapeName);e.x=s.target.x(),e.y=s.target.y(),e.rotation=s.target.rotation(),e.scaleX=s.target.scaleX(),e.scaleY=s.target.scaleY()},handleStageMouseDown(s){if(s.target===s.target.getStage()){this.selectedShapeName="",this.updateTransformer();return}if(s.target.getParent().className==="Transformer")return;const n=s.target.name(),l=this.shapes.find(u=>u.attrs.name===n);console.log(l),l?this.selectedShapeName=n:this.selectedShapeName="",this.updateTransformer()},updateTransformer(){const s=this.$refs.transformer.getNode(),e=s.getStage(),{selectedShapeName:n}=this,l=e.findOne("."+n);l!==s.node()&&(l?s.nodes([l]):s.nodes([]))},addDoughnut(){},addPolygon(){},addTriangle(){},addSeat(){const r=[];for(let m=0;m<4;m++)for(let h=0;h<6;h++)r.push({x:20*h,y:20*m});this.seatGroups.push({x:400,y:100,width:120,height:80,seats:r})}}},P=t("h2",null,"Shapes",-1),U=t("h2",null,"Seats",-1);function W(s,e,n,l,u,o){const r=i("v-transformer"),m=i("v-rect"),h=i("v-group"),C=i("v-layer"),V=i("v-stage");return c(),g("div",{class:k([n.class,"w-100"]),style:M(n.style)},[t("div",null,[d(V,{config:u.stageConfig,onMousedown:o.handleStageMouseDown,onTouchstart:o.handleStageMouseDown,ref:"stage"},{default:f(()=>[d(C,{ref:"layer"},{default:f(()=>[(c(!0),g(v,null,y(u.shapes,(a,p)=>(c(),_(T(a.type),N({key:p},a.attrs,{onTransformend:o.handleTransformEnd}),null,16,["onTransformend"]))),128)),d(r,{ref:"transformer"},null,512),(c(!0),g(v,null,y(u.seats,(a,p)=>(c(),_(h,{key:p},{default:f(()=>[d(m,{x:a.x,y:a.y,width:"20",height:"20",fill:"gray",draggable:"true"},null,8,["x","y"])]),_:2},1024))),128))]),_:1},512)]),_:1},8,["config","onMousedown","onTouchstart"]),t("div",null,[P,t("button",{onClick:e[0]||(e[0]=(...a)=>o.addCircle&&o.addCircle(...a))},"Add Circle"),t("button",{onClick:e[1]||(e[1]=(...a)=>o.addSquare&&o.addSquare(...a))},"Add Square"),t("button",{onClick:e[2]||(e[2]=(...a)=>o.addDoughnut&&o.addDoughnut(...a))},"Add Doughnut"),t("button",{onClick:e[3]||(e[3]=(...a)=>o.addPolygon&&o.addPolygon(...a))},"Add Polygon"),t("button",{onClick:e[4]||(e[4]=(...a)=>o.addTriangle&&o.addTriangle(...a))},"Add Triangle")]),t("div",null,[U,t("button",{onClick:e[5]||(e[5]=(...a)=>o.addSeat&&o.addSeat(...a))},"Add Seat")])])],6)}const E=S(H,[["render",W]]),O={class:""},R=t("h4",{class:"bold text-primary mb-4"},"New Venue",-1),x={class:"row"},F={class:"col-12 col-md-6"},I=t("label",{class:"fw-bold mb-1"}," Title ",-1),L={class:"col-12 col-md-6"},z=t("label",{class:"fw-bold mb-1"}," Address ",-1),G={class:"col-12 col-md-6"},X={class:"mb-3"},Y=t("label",{class:"fw-bold mb-1"}," Country ",-1),j={class:"col-12 col-md-6"},J={class:"mb-3"},K=t("label",{class:"fw-bold mb-1"}," State ",-1),Q=t("label",{for:"showCanvas"}," Create Design setting for the Venue ",-1),Z={key:0,class:"bg-whitesmoke mt-2 mx-2 rounded-7"},$=["disabled"],ee={name:"HomeView",components:{},data(){return{venue:{country:"",state:""},showCanvas:!1}},computed:{formValidate(){const{country:s,state:e,title:n,address:l}=this.venue;return s&&e&&n&&l}},methods:{async createVenue(){if(!this.formValidate){this.$toast.show("Fill all Required Inputs");return}this.$widget.openLoading();const s=await this.$store.dispatch("createVenueService",this.venue);if(console.log("res",s),this.$widget.dismiss(),s.success)this.$toast.success("Venue has been created successfully"),this.$router.push("/venues");else{this.error=this.$widget.getValidationError(s.errorMessage,"Could not create venue"),this.$toast.error(this.error);return}}}},ae=Object.assign(ee,{setup(s){return(e,n)=>{const l=i("te-header"),u=i("country-select"),o=i("region-select");return c(),g("div",O,[d(l),t("form",{class:"p-3",onSubmit:n[5]||(n[5]=A((...r)=>e.createVenue&&e.createVenue(...r),["prevent"]))},[R,t("div",x,[t("div",F,[t("div",null,[I,b(t("input",{placeholder:"Le ccusa","onUpdate:modelValue":n[0]||(n[0]=r=>e.venue.title=r),class:"p-2 border rounded-7 w-100 mb-3",required:""},null,512),[[w,e.venue.title]])])]),t("div",L,[t("div",null,[z,b(t("input",{placeholder:"Input venue's full address","onUpdate:modelValue":n[1]||(n[1]=r=>e.venue.address=r),required:"",class:"p-2 border rounded-7 w-100 mb-3"},null,512),[[w,e.venue.address]])])]),t("div",G,[t("div",X,[Y,d(u,{countryName:"",modelValue:e.venue.country,"onUpdate:modelValue":n[2]||(n[2]=r=>e.venue.country=r),country:e.country,topCountry:"US",required:"",class:"w-100 p-2 border rounded-7"},null,8,["modelValue","country"])])]),t("div",j,[t("div",J,[K,d(o,{countryName:"",regionName:"",modelValue:e.venue.state,"onUpdate:modelValue":n[3]||(n[3]=r=>e.venue.state=r),country:e.venue.country,region:e.venue.state,required:"",class:"w-100 p-2 border rounded-7"},null,8,["modelValue","country","region"])])]),t("div",null,[d(q(B),{inputId:"showCanvas",class:"me-2",name:"",modelValue:e.showCanvas,"onUpdate:modelValue":n[4]||(n[4]=r=>e.showCanvas=r),binary:!0},null,8,["modelValue"]),Q]),e.showCanvas?(c(),g("div",Z,[d(E,{class:"",style:{"min-height":"300px"}})])):D("",!0)]),t("button",{class:"btn btn-sm small btn-primary mt-5 p-3 p-md-2 mb-4 w-100 w-lg-fit",disabled:!e.formValidate,type:"submit"}," Create Venue ",8,$)],32)])}}});export{ae as default};
